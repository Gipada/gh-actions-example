name: code-quality-java
inputs:
  working-directory:
    required: false
    default: ''

runs:
  using: composite
  steps:
    - name: checkout
      uses: actions/checkout@v3
    - name: setup-java
      uses: actions/setup-java@v5
      with:
        distribution: 'temurin' # See 'Supported distributions' for available options
        java-version: '21'
    - name: checkstyle with maven
      run: ./mvnw checkstyle:checkstyle
      shell: bash
      working-directory: ${{ inputs.working-directory }}
    - name: checkstyle with maven
      run: ./mvnw test
      shell: bash
      working-directory: ${{ inputs.working-directory }}
    - run: mkdir quality && cp -R target/reports/* quality && cp target/surefire-reports/* quality
      shell: bash
      working-directory: ${{ inputs.working-directory }}
    - uses: actions/upload-artifact@v4
      with:
        name: Quality package
        path: java-app/quality

